$((function(){let t=Math.max(document.documentElement.clientWidth,window.innerWidth||0),e=Math.max(document.documentElement.clientHeight,window.innerHeight||0),i=null;function n(){console.log("rerendering");const e=t<768?1:t<992?3:4;$.each(i,(function(i,n){let o,d,s;if(o=n.multimedia[0].url,null!=o){let a=n.multimedia[0].width,r=n.multimedia[0].height;1.5*a>r?(r=t/e*1.5,a="auto"):(a=t/e,r="auto"),s=n.url,d=n.abstract||n.title,$(".article-grid").append(`\n\t\t\t\t<a href="${s}" class="grid-links">\n\t\t\t\t\t<figure class="cell-${i}">\n\t\t\t\t\t\t<img src="${o}" width="${a}" height="${r}"/img>\n\t\t\t\t\t\t<figurecaption>\n\t\t\t\t\t\t\t<p>${d}</p>\n\t\t\t\t\t\t</figurecaption>\n\t\t\t\t\t</figure>\n\t\t\t\t</a>`)}}))}$("#category-selector").select2({width:"100%",theme:"classic",placeholder:"Sections...",data:[{id:0,text:"badCateTest"},{id:1,text:"arts"},{id:2,text:"automobiles"},{id:3,text:"books"},{id:4,text:"business"},{id:5,text:"books"},{id:6,text:"business"},{id:7,text:"fashion"},{id:8,text:"food"},{id:9,text:"health"},{id:10,text:"home"},{id:11,text:"insider"},{id:12,text:"magazine"},{id:13,text:"movies"},{id:14,text:"NYregion"},{id:15,text:"obituaries"},{id:16,text:"opinion"},{id:17,text:"politics"},{id:18,text:"realestate"},{id:19,text:"science"},{id:20,text:"sports"},{id:21,text:"sundayreview"},{id:22,text:"technology"},{id:23,text:"theatre"},{id:24,text:"theater"},{id:25,text:"t-magazine"},{id:26,text:"travel"},{id:27,text:"upshot"},{id:28,text:"U.S."},{id:29,text:"world"}],closeOnSelect:!0}),$("#category-selector").change((function(t){$(".article-grid").empty(),$(".error-wrapper").removeClass("show"),$(".loading-wrapper").addClass("show"),$("header").addClass("shrink");let e=$("#category-selector").find(":selected").text();$.getJSON(`https://api.nytimes.com/svc/topstories/v2/${e}.json?api-key=f2IdtWRfwa37ubY3f2wGJ5MDReLY3klv`).done((function({results:t}){console.log("success"),$(".loading-wrapper").removeClass("show"),i=t,n()})).fail((function(t){console.log(t.responseText),$(".loading-wrapper").removeClass("show"),$(".error-wrapper p").text(t.responseText),$(".error-wrapper").addClass("show")}))})),$(window).resize((function(){t=Math.max(document.documentElement.clientWidth,window.innerWidth||0),e=Math.max(document.documentElement.clientHeight,window.innerHeight||0),null!==i&&n()}))}));